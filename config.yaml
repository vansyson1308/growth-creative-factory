# Growth Creative Factory — Configuration
# ────────────────────────────────────────

# Underperforming ad selection thresholds
selector:
  min_impressions: 1000        # ignore ads with fewer impressions
  max_ctr: 0.02                # CTR below this → underperforming (2 %)
  max_cpa: 50.0                # CPA above this → underperforming
  min_roas: 2.0                # ROAS below this → underperforming
  # An ad is "underperforming" when ANY threshold is breached
  # (after passing the min_impressions gate)

# Generation settings
generation:
  num_headlines: 10            # headlines to request from LLM per attempt
  num_descriptions: 6          # descriptions to request from LLM per attempt
  max_headline_chars: 30       # Google Ads headline limit
  max_description_chars: 90    # Google Ads description limit
  retry_limit: 3               # (legacy) alias for max_retries_validation
  max_variants_per_run: 100    # safety cap on cross-product combinations
  max_variants_headline: 5     # max headlines passed to pipeline (cost control)
  max_variants_desc: 3         # max descriptions passed to pipeline (cost control)
  max_retries_validation: 2    # validation-retry loops per generator call

# Deduplication
dedupe:
  similarity_threshold: 85     # rapidfuzz ratio; ≥ this → duplicate

# Policy filter — regex patterns to reject
policy:
  blocked_patterns:
    - "(?i)cam kết"
    - "(?i)tuyệt đối"
    - "(?i)\\bno\\.?\\s*1\\b"
    - "(?i)\\bbest\\b"
    - "(?i)\\bguarantee[d]?\\b"
    - "(?i)\\b#1\\b"
    - "(?i)100%"

# LLM provider
provider:
  name: anthropic              # anthropic | mock
  model: claude-sonnet-4-5-20250929
  temperature: 0.8
  max_tokens: 2048

# Memory
memory:
  path: memory/memory.jsonl

# Budget guardrails (live mode)
budget:
  max_calls_per_run: 50        # max generate() calls per pipeline run; 0 = unlimited
  daily_budget_tokens: 100000  # informational ceiling (not auto-enforced)

# API retry / backoff (live mode)
retry_api:
  max_api_retries: 3           # extra attempts on 429/529/5xx
  backoff_base_seconds: 1.0    # base for exponential back-off
  backoff_max_seconds: 60.0    # cap on any single sleep

# LLM response cache (SQLite)
cache:
  enabled: true                # set to false to disable entirely
  path: cache/llm_cache.db     # relative to working directory
